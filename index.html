<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ArsMathica </title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black;
    overflow: hidden;
    font-family: "Inter", sans-serif;
  }

  /* INTRO WRAPPER */
  #intro {
    position: fixed;
    inset: 0;
    background: black;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    z-index: 9999;
    animation: fadeOut 0.9s ease 3.2s forwards;
  }

  /* BULLET LINES */
  .bullet {
    position: absolute;
    left: -40vw;
    width: 220px;
    height: 3px;
    background: linear-gradient(90deg, transparent, #ffdd88);
    filter: blur(0.6px);
    opacity: 0;
  }

  /* bullet animation triggered via JS */
  .shoot {
    animation: bulletMove 700ms cubic-bezier(.18,.9,.2,1) forwards;
  }

  @keyframes bulletMove {
    0%   { opacity:0; transform:translateX(0) translateY(var(--dy)); }
    10%  { opacity:1; }
    100% { opacity:0; transform:translateX(100vw) translateY(calc(var(--dy) + 40px)); }
  }

  /* FLASH */
  #flash {
    position: absolute;
    width: 260px;
    height: 260px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,150,40,0.65), transparent 70%);
    filter: blur(20px);
    opacity: 0;
    transform: scale(0.4);
    transition: opacity 300ms ease, transform 500ms ease;
  }

  #flash.active {
    opacity: 1;
    transform: scale(1);
  }

  /* TITLE */
  #title {
    font-size: 3rem;
    font-weight: 800;
    letter-spacing: 6px;
    color: #ffddb0;
    text-shadow:
      0 0 10px #ffae42,
      0 0 20px #ff7a00,
      0 0 40px #ff3c00;
    opacity: 0;
    transform: scale(0.85);
    transition: opacity 500ms ease 300ms, transform 600ms ease 300ms;
  }

  #title.revealed {
    opacity: 1;
    transform: scale(1);
  }

  @keyframes fadeOut { 100% { opacity: 0; visibility: hidden; } }

  /* APP IFRAME */
  iframe {
    width: 100%;
    height: 100%;
    border: none;
    opacity: 0;
    position: relative;
    z-index: 1 !important; /* LOWER than overlay */
    animation: showApp 1s ease 3.3s forwards;
  }

  @keyframes showApp {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  /* YOUR BRAND OVERLAY (always visible, hides Base44 badge) */
  #my-brand {
    position: fixed;
    bottom: 18px;
    right: 22px;

    padding: 6px 16px;
    font-size: 14px;
    font-weight: 600;
    color: white;

    background: rgba(40,0,60,0.45);
    border: 1px solid rgba(160,80,255,0.25);
    border-radius: 10px;
    backdrop-filter: blur(6px);

    z-index: 999999999 !important; /* ALWAYS above iframe */
    pointer-events: none;
  }

</style>
</head>

<body>

<!-- INTRO -->
<div id="intro">
  <div id="flash"></div>
  <div id="title">ARS MATHICA</div>
</div>

<!-- MAIN IFRAME -->
<iframe src="https://arsmathica-mathvisualised.base44.app/"></iframe>

<!-- CUSTOM NAME TAG (covers badge) -->
<div id="my-brand">ArsMathica</div>

<script>
/* Simple reliable JS intro */

const intro = document.getElementById("intro");
const flash = document.getElementById("flash");
const title = document.getElementById("title");

/* Bullet data */
const bullets = [
  { top: "40vh", delay: 50,  dy: -20 },
  { top: "46vh", delay: 260, dy: -8  },
  { top: "52vh", delay: 420, dy: 10  },
  { top: "58vh", delay: 580, dy: 20  },
];

function fireBullet(b){
  const el = document.createElement("div");
  el.className = "bullet";
  el.style.top = b.top;
  el.style.setProperty("--dy", b.dy + "px");
  intro.appendChild(el);

  setTimeout(()=> el.classList.add("shoot"), b.delay);
  setTimeout(()=> el.remove(), 1500);
}

window.addEventListener("load", () => {
  setTimeout(()=>{
    bullets.forEach(b=>fireBullet(b));

    setTimeout(()=>flash.classList.add("active"), 700);
    setTimeout(()=>title.classList.add("revealed"), 1200);
    setTimeout(()=>flash.classList.remove("active"), 2000);
  }, 200);
});
</script>

</body>
</html>
